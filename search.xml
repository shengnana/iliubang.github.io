<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[å·¥å‚è®¾è®¡æ¨¡å¼]]></title>
      <url>http://iliubang.github.io/2017/02/07/%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="å·¥å‚æ¨¡å¼æ¦‚è¿°"><a href="#å·¥å‚æ¨¡å¼æ¦‚è¿°" class="headerlink" title="å·¥å‚æ¨¡å¼æ¦‚è¿°"></a>å·¥å‚æ¨¡å¼æ¦‚è¿°</h1><p>å·¥å‚(Factory Pattern)æ¨¡å¼æ˜¯Javaä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚<br>åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p>
<h1 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h1><p><img src="/img/2017020701.jpg" alt="umlå›¾"></p>
<a id="more"></a>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªå°å°çš„æ —å­ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Operation <span class="title">createOperation</span><span class="params">(String operate)</span> </span>&#123;</div><div class="line">    Operation op = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">switch</span>(operate) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">"+"</span>:</div><div class="line">            op = <span class="keyword">new</span> OperationAdd();</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"-"</span>:</div><div class="line">            op = <span class="keyword">new</span> OperationSub();</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"*"</span>:</div><div class="line">            op = <span class="keyword">new</span> OperationMul();</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">"/"</span>:</div><div class="line">            op = <span class="keyword">new</span> OperationDiv();</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> op;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¼˜ç‚¹ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦ä¿®æ”¹ä»£ç <br>ç¼ºç‚¹ï¼šå½“éœ€è¦å¢åŠ æ–°çš„è¿ç®—ç±»çš„æ—¶å€™ï¼Œä¸ä»…éœ€æ–°åŠ è¿ç®—ç±»ï¼Œè¿˜è¦ä¿®æ”¹å·¥å‚ç±»ï¼Œè¿åäº†å¼€é—­åŸåˆ™ã€‚</p>
<h1 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h1><p>æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šä»–ä»¬å…·ä½“çš„ç±»ã€‚<br><img src="/img/2017020702.jpg" alt="umlå›¾"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Shape.java</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Rectangle.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Rectangle::draw() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Square.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Square::draw() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Circle.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Circle::draw() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Color.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Color</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Red.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Red</span> <span class="keyword">implements</span> <span class="title">Color</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Red::fill() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//Green.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Green</span> <span class="keyword">implements</span> <span class="title">Color</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Green::fill() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//Blue.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blue</span> <span class="keyword">implements</span> <span class="title">Color</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Inside Blue::fill() method"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//ä¸ºColorå’ŒShapeå¯¹è±¡åˆ›å»ºæŠ½è±¡ç±»æ¥è·å–å·¥å‚</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> class <span class="title">AbstractFactory</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">abstract</span> Color <span class="title">getColor</span><span class="params">(String color)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">abstract</span> Shape <span class="title">getShape</span><span class="params">(String shape)</span></span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//åˆ›å»ºæ‰©å±•äº†AbstractFactoryçš„å·¥å‚ç±»ï¼ŒåŸºäºç»™å®šçš„ä¿¡æ¯ç”Ÿæˆå®ä½“ç±»çš„å¯¹è±¡ã€‚</span></div><div class="line"><span class="comment">//ShapeFactory</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeFactory</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Shape <span class="title">getShape</span><span class="params">(String shape)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (shape == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span> (shape.equalsIgnoreCase(<span class="string">"circle"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Circle();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape.equalsIgnoreCase(<span class="string">"square"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Square();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape.equalsIgnoreCase(<span class="string">"rectangle"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Rectangle();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//ColorFactory</span></div><div class="line">publicc <span class="class"><span class="keyword">class</span> <span class="title">ColorFactory</span> <span class="keyword">extends</span> <span class="title">AbastractFactory</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getColor</span><span class="params">(String color)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (color == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (color.equalsIgnoreCase(<span class="string">"red"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Red();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (color.equalsIgnoreCase(<span class="string">"green"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Green();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (color.equalsIgnoreCase(<span class="string">"blue"</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> blue();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼]]></title>
      <url>http://iliubang.github.io/2017/02/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ç®€ä»‹"><a href="#è®¾è®¡æ¨¡å¼ç®€ä»‹" class="headerlink" title="è®¾è®¡æ¨¡å¼ç®€ä»‹"></a>è®¾è®¡æ¨¡å¼ç®€ä»‹</h1><p>è®¾è®¡æ¨¡å¼(design patterns)æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ä»£ç è®¾è®¡ç»éªŒæ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ï¼Œä¿è¯ä»£ç çš„å¯é æ€§ã€‚æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºäººéƒ½æ˜¯æœ‰åˆ©çš„ã€‚è®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚é€šå¤§å¦çš„ä¸€å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§è®¾è®¡æ¨¡å¼åœ¨ç°åœ¨ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†ä¸ä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚</p>
<a id="more"></a>
<h1 id="è®¾è®¡æ¨¡å¼åˆ†ç±»"><a href="#è®¾è®¡æ¨¡å¼åˆ†ç±»" class="headerlink" title="è®¾è®¡æ¨¡å¼åˆ†ç±»"></a>è®¾è®¡æ¨¡å¼åˆ†ç±»</h1><p>æ€»ä½“æ¥è¯´è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<p>åˆ›å»ºå‹æ¨¡å¼ï¼Œå…±äº”ä¸­ï¼š</p>
<ul>
<li>å·¥å‚æ–¹æ³•æ¨¡å¼</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼</li>
<li>å•ä¾‹æ¨¡å¼</li>
<li>å»ºé€ è€…æ¨¡å¼</li>
<li>åŸå‹æ¨¡å¼</li>
</ul>
<p>ç»“æ„å‹æ¨¡å¼ï¼Œå…±ä¸ƒç§ï¼š</p>
<ul>
<li>é€‚é…å™¨æ¨¡å¼</li>
<li>è£…é¥°å™¨æ¨¡å¼</li>
<li>ä»£ç†æ¨¡å¼</li>
<li>å¤–è§‚æ¨¡å¼</li>
<li>æ¡¥æ¥æ¨¡å¼</li>
<li>ç»„åˆæ¨¡å¼</li>
<li>äº«å…ƒæ¨¡å¼</li>
</ul>
<p>è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…±åä¸€ç§ç±»ï¼š</p>
<ul>
<li>ç­–ç•¥æ¨¡å¼</li>
<li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>è¿­ä»£å­æ¨¡å¼</li>
<li>è´£ä»»é“¾æ¨¡å¼</li>
<li>å‘½ä»¤æ¨¡å¼</li>
<li>å¤‡å¿˜å½•æ¨¡å¼</li>
<li>çŠ¶æ€æ¨¡å¼</li>
<li>è®¿é—®è€…æ¨¡å¼</li>
<li>ä¸­ä»‹è€…æ¨¡å¼</li>
<li>è§£é‡Šå™¨æ¨¡å¼</li>
</ul>
<p>å…¶å®è¿˜æœ‰ä¸¤ç±»ï¼šå¹¶å‘å‹æ¨¡å¼å’Œçº¿ç¨‹æ± æ¨¡å¼</p>
<h1 id="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™</h1><p><strong>1. å¼€é—­åŸåˆ™(Open Close Principle)</strong><br>å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‰©å±•çš„æ—¶å€™ï¼Œä¸èƒ½ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ã€‚</p>
<p><strong>2. é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle)</strong><br>é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle LSP)æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€é—­åŸåˆ™â€çš„è¡¥å……ã€‚å®ç°â€œå¼€é—­åŸåˆ™â€çš„å…³é”®æ­¥éª¤æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸è¡ç”Ÿç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚</p>
<p><strong>3. ä¾èµ–å€’è½¬åŸåˆ™(Dependence Inversion Principle)</strong><br>è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚</p>
<p><strong>4. æ¥å£éš”ç¦»åŸåˆ™(Interface Segregation Principle)</strong><br>è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´è€¦åˆåº¦çš„æ„æ€ã€‚ä»è¿™é‡Œæˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚</p>
<p><strong>5. è¿ªç±³ç‰¹æ³•åˆ™(æœ€å°‘äº†è§£åŸåˆ™)(Demeter Principle)</strong><br>å®šä¹‰ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ï¼Œä»è€Œä½¿å¾—åŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚</p>
<p><strong>6. åˆæˆå¤ç”¨åŸåˆ™(Composite Reuse Principle)</strong><br>å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸ä½¿ç”¨ç»§æ‰¿ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åŸºäºCè¯­è¨€çš„ç¼–ç¨‹è¯­è¨€å¼€å‘yacc_lexåˆæ­¥]]></title>
      <url>http://iliubang.github.io/2017/02/06/%E5%9F%BA%E4%BA%8EC%E8%AF%AD%E8%A8%80%E7%9A%84%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91yacc-lex%E5%88%9D%E6%AD%A5/</url>
      <content type="html"><![CDATA[<h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>å½“ä»Šä¸–é“ï¼Œå„ç§é«˜çº§è¯­è¨€ç™¾èŠ±é½æ”¾ã€‚ç„¶è€Œä¼šæœ‰äººå‘å‡ºè¿™æ ·çš„ç–‘é—®â€“è®¡ç®—æœºçœŸçš„èƒ½å¤Ÿè¯†åˆ«è¿™ä¹ˆå¤šè¯­è¨€å—ï¼Ÿç¨å¾®æœ‰ç‚¹å¸¸è¯†çš„äººéƒ½çŸ¥é“ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯èƒ½æ»´ï¼åœ¨è®¡ç®—æœºçš„ä¸–ç•Œé‡Œï¼Œä»–ä»¬èƒ½å¤Ÿç›´æ¥è¯†åˆ«çš„åªæœ‰æœºå™¨è¯­è¨€ã€‚ç„¶è€Œï¼Œç”±äºæœºå™¨è¯­è¨€å¯¹äººç±»ä¸å¤Ÿå‹å¥½ï¼Œæ‰€ä»¥äººä»¬æ‰å‘æ˜äº†æ±‡ç¼–ï¼Œcï¼ŒJavaâ€¦è®¸è®¸å¤šå¤šçš„äººç±»æ˜“è¯»çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººå¯¹ç¼–ç¨‹è¯­è¨€çš„ç†è§£ä¸€ç›´æ˜¯å…¶å®ä»–ä»¬å°±æ˜¯æœºå™¨è¯­è¨€çš„è¯­æ³•ç³–ï¼Œè€Œç¼–ç¨‹è¯­è¨€çš„åˆ›é€ è¿‡ç¨‹ï¼Œå°±æ˜¯å®šä¹‰ä¸€ç§åˆç†çš„ï¼Œæ²¡æœ‰äºŒä¹‰æ€§çš„è¯­æ³•è§„åˆ™ï¼Œç„¶åå°±æ˜¯é€šè¿‡ç›´æ¥æˆ–é—´æ¥çš„æ–¹å¼å®ç°è¯¥è¯­æ³•åˆ°æœºå™¨è¯­è¨€çš„è½¬æ¢è¿‡ç¨‹ã€‚æ—¢ç„¶æ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œè®¡ç®—æœºè¯­è¨€æ˜¯ä¸€ä¸ªè‡ªæˆ‘å®Œå–„çš„è¿‡ç¨‹ï¼šé¦–å…ˆæˆ‘ä»¬å®šäº†ä¸€ç§éå¸¸ç®€å•çš„x1(è¿™é‡Œåªæ˜¯ç”¨æ¥ä¸¾ä¾‹è¯´æ˜ï¼Œæœ‰æ²¡æœ‰xè¯­è¨€æœ‰å¾…è€ƒè¯)è¯­è¨€ï¼Œç„¶åç”¨æœºå™¨è¯­è¨€å®ç°äº†è¿™ä¸ªéå¸¸ç®€å•çš„x1è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œåˆ›é€ äº†x1è¯­è¨€ï¼Œå®ç°äº†éå¸¸ç®€å•çš„æ–°ç‰¹æ€§ï¼Œç„¶åæˆ‘ä»¬å†ç”¨x1è¯­è¨€(ç›¸å¯¹äºæœºå™¨è¯­è¨€è¾ƒé«˜çº§)å®ç°äº†å¦ä¸€äº›æ–°çš„ç‰¹æ€§çš„x2è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œåˆ›é€ äº†x2è¯­è¨€ï¼Œâ€¦<a id="more"></a>ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œäººä»¬åˆ›é€ äº†æ±‡ç¼–è¯­è¨€ï¼Œä»è€Œåˆ›é€ äº†cè¯­è¨€ï¼Œæ¥ç€åˆ›é€ äº†ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€PHP(ä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ï¼Œåæ­£å¤§å®¶éƒ½ä¹ æƒ¯è¿™ä¹ˆè¯´)ã€‚<br>åœ¨å„ç§é«˜çº§è¯­è¨€è¶Šæ¥è¶Šå¼ºå¤§çš„ä»Šå¤©ï¼Œæˆ‘ä»¬å¯èƒ½å¾ˆéš¾å†ä¼šå»æ¥è§¦æœ€åŸå§‹çš„ä¸œè¥¿ï¼Œé«˜åº¦å°è£…ç¡®å®æé«˜äº†ç”Ÿäº§åŠ›ï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—ç°ä»£ç¨‹åºå‘˜å°†å¤ªå¤šç²¾åŠ›èŠ±åœ¨äº†å„ç§è¯´æ˜ä¹¦ä¸Šï¼Œè€Œä¸æ¸…æ¥šå…¶æœ¬è´¨ã€‚<br>æ¯•ä¸šä¸€å¹´å¤šï¼Œå·¥ä½œäº†ä¸€å¹´å¤šï¼Œå¯¹äºè®¡ç®—æœºç¼–ç¨‹æœ‰äº†è‡ªå·±çš„çœ‹æ³•ï¼Œä¸å†åƒåœ¨å¤§å­¦çš„æ—¶å€™è®¤è¯†çš„é‚£æ ·è‚¤æµ…ï¼Œåè€Œè§‰å¾—å¤§å­¦ä¸­å­¦ä¹ çš„çŸ¥è¯†æ‰æ˜¯çœŸæ­£çš„å¹²è´§ï¼Œä¸ç¦æ„Ÿå¹æ›¾ç»æµªè´¹æ‰äº†å¤§å¥½å…‰é˜´ã€‚å¥½åœ¨é™¶æ¸Šæ˜æœ‰è¯äº‘ï¼šâ€œæ‚Ÿå·²å¾€ä¹‹ä¸è°ï¼ŒçŸ¥æ¥è€…ä¹‹å¯è¿½â€ã€‚<br>é—²æš‡ä¹‹ä½™ï¼Œæ‰’å¼€PHP(è¿™é‡Œä¹‹æ‰€ä»¥æ˜¯PHPå¹¶ä¸å› ä¸ºä»–æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼Œåªæ˜¯å› ä¸ºæˆ‘ç›®å‰ä»äº‹çš„æ˜¯PHPå¼€å‘çš„å·¥ä½œè€Œå·²)æºç ï¼Œäº†è§£äº†å…¶å†…éƒ¨æ„é€ å’Œå®ç°åŸç†ï¼Œç™¾çœ‹ä¸ä¸€ç»ƒã€‚ä»Šå¤©å°±åˆæ­¥å­¦ä¹ yacc/lexäº†ï¼Œè®°å½•åœ¨æˆ‘çš„åšå®¢ä¸­ï¼Œä»¥ä¾¿ä»¥åç¿»é˜…å·©å›ºã€‚</p>
<h1 id="è¿‡ç¨‹ç®€è¿°"><a href="#è¿‡ç¨‹ç®€è¿°" class="headerlink" title="è¿‡ç¨‹ç®€è¿°"></a>è¿‡ç¨‹ç®€è¿°</h1><p>ä¸€èˆ¬æ¥è¯´ç¼–ç¨‹è¯­è¨€çš„è§£é‡Šæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><strong>ONE</strong>. è¯æ³•åˆ†æ<br>å°†æºä»£ç æ‹†åˆ†æˆè‹¥å¹²Tokençš„è¿‡ç¨‹</p>
<p><strong>TWO</strong>.è¯­æ³•åˆ†æ<br>å°†Tokenæ„å»ºæˆSyntax Treeçš„è¿‡ç¨‹</p>
<p><strong>THREE</strong>.ç”Ÿæˆæ‰§è¡Œç <br>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</p>
<h1 id="yaccï¼ˆYet-Another-Compiler-Compilerï¼‰"><a href="#yaccï¼ˆYet-Another-Compiler-Compilerï¼‰" class="headerlink" title="yaccï¼ˆYet Another Compiler Compilerï¼‰"></a>yaccï¼ˆYet Another Compiler Compilerï¼‰</h1><p>ä¸‹é¢æ˜¯wikipediaä¸­å¯¹yaccçš„æè¿°</p>
<blockquote>
<p>Yacc is a computer program for the Unix operating system. It is a Look Ahead Left-to-Right (LALR) parser generator, generating a parser, the part of a compiler that tries to make syntactic sense of the source code, specifically a LALR parser, based on an analytic grammar written in a notation similar to Backusâ€“Naur Form (BNF). Yacc itself used to be available as the default parser generator on most Unix systems, though it has since been supplanted as the default by more recent, largely compatible, programs.</p>
</blockquote>
<p>å…¶å®‰è£…éå¸¸ç®€å•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install bison</div></pre></td></tr></table></figure>
<h1 id="lex-flex"><a href="#lex-flex" class="headerlink" title="lex/flex"></a>lex/flex</h1><p>lex æ˜¯ä¸€ä¸ªç”Ÿæˆè¯æ³•åˆ†æå™¨çš„å·¥å…·ã€‚Lexè¯»è¿›ä¸€ä¸ªä»£è¡¨è¯æ³•åˆ†æå™¨è§„åˆ™çš„è¾“å…¥å­—ç¬¦ä¸²æµï¼Œç„¶åè¾“å‡ºä»¥Cè¯­è¨€å®åšçš„è¯æ³•åˆ†æå™¨æºä»£ç ã€‚ä¼ ç»Ÿä¸Šï¼Œlexå±äºå•†ä¸šè½¯ä»¶ï¼Œä½†æ˜¯æœ‰äº›æ ¹æ®åŸæœ¬AT&amp;Tä»£ç è¿™äº›ç‰ˆæœ¬çš„Lexå¯ä»¥ä»¥å…¬å¼€æºä»£ç çš„å½¢å¼è·å¾—ï¼Œå¹¶è¢«è§†ä¸ºæŸäº›ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚è¯´OpenSolariså’Œè´å°”å®éªŒå®¤ä¹å·é¡¹ç›®ã€‚å¦ä¸€ä¸ªæœ‰åçš„Lexå…¬å¼€æºä»£ç ç‰ˆæœ¬æ˜¯flexï¼Œä»£è¡¨â€å¿«é€Ÿçš„è¯æ³•åˆ†æå™¨â€ï¼ˆfast lexical analyzerï¼‰</p>
<p>åœ¨linuxä¸‹å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install flex</div></pre></td></tr></table></figure>
<h1 id="practice"><a href="#practice" class="headerlink" title="practice"></a>practice</h1><ul>
<li>å®ç°ä¸€ä¸ªç®€å•çš„è®¡ç®—ç¨‹åº</li>
</ul>
<p>é¦–å…ˆå®šä¹‰lexè§„åˆ™ï¼Œå…¶æ‰©å±•åä¸º<code>.l</code>ï¼Œåœ¨lexä¸­å¯ä»¥å¾ˆå®¹æ˜“è¯»æ‡‚å…¶å®šä¹‰çš„è§„åˆ™ï¼Œå› ä¸ºä»–ç”¨åˆ°çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"y.tab.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">%&#125;</div><div class="line"></div><div class="line">%%</div><div class="line"></div><div class="line"><span class="string">"+"</span>		<span class="keyword">return</span> ADD;</div><div class="line"><span class="string">"-"</span>		<span class="keyword">return</span> SUB;</div><div class="line"><span class="string">"*"</span>		<span class="keyword">return</span> MUL;</div><div class="line"><span class="string">"/"</span>		<span class="keyword">return</span> DIV;</div><div class="line"><span class="string">"\n"</span>		<span class="keyword">return</span> CR;</div><div class="line"></div><div class="line">([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)|<span class="number">0</span>|([<span class="number">0</span><span class="number">-9</span>]+\.[<span class="number">0</span><span class="number">-9</span>]+) &#123;</div><div class="line">	<span class="keyword">double</span> d;</div><div class="line">	<span class="built_in">sscanf</span>(yytext, <span class="string">"%lf"</span>, &amp;d);</div><div class="line">	yylval.double_value = d;</div><div class="line">	<span class="keyword">return</span> DOUBLE_LITERAL;</div><div class="line">&#125;</div><div class="line"></div><div class="line">[ \t] ;</div><div class="line">. &#123;</div><div class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"lexical error.\n"</span>);</div><div class="line">	<span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line">%%</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ä»¥ä¸Šçš„ä»£ç ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œ<code>%{</code> <code>%}</code>åŒ…å«çš„éƒ¨åˆ†å’Œ<code>%%</code> <code>%%</code>åŒ…å«çš„éƒ¨åˆ†ã€‚å‰ä¸€éƒ¨åˆ†å«<strong>å®šä¹‰åŒºå—</strong>, åè€…æ˜¯<strong>è§„åˆ™åŒºå—</strong>ï¼Œå®šä¹‰åŒºå—å†…çš„ä»£ç å°†ä¼šè¢«åŸæ ·è¾“å‡ºï¼Œåœ¨å®šä¹‰åŒºå—ä¸­<code>#include &quot;y.tab.h&quot;</code>å°†ä¼šåœ¨yaccç¼–è¯‘å…¶è§„åˆ™æ–‡ä»¶åè‡ªåŠ¨ç”Ÿæˆï¼Œ<code>ADD</code> <code>SUB</code> <code>MUL</code> <code>DIV</code> <code>CR</code> <code>DOUBLE_LITERAL</code>ç­‰éƒ½æ˜¯åœ¨y.tab.hä¸­å®šä¹‰çš„macroã€‚<br>åœ¨å®šä¹‰åŒºå—ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸º<code>yywrap</code>çš„functionï¼Œå…¶ä½œç”¨æ˜¯è‡ªåŠ¨link lexçš„åº“æ–‡ä»¶ã€‚<br>è‡³äºè§„åˆ™åŒºå—ï¼Œå­¦è¿‡æ­£åˆ™è¡¨è¾¾å¼çš„äººä¸€çœ‹å°±ä¼šæ˜ç™½ï¼Œå…¶ä½œç”¨å°±æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æè¿°Tokenã€‚è§„åˆ™åŒºå—çš„å®šä¹‰ä¸ºï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼Œåè¾¹è·Ÿä¸ŠCä»£ç ï¼Œè¿™äº›ä»£ç ç”¨<code>{}</code>æ‹¬èµ·æ¥ï¼Œè¯»å…¥çš„å­—ç¬¦æµæ»¡è¶³äº†æ­£åˆ™ï¼Œåˆ™æ‰§è¡Œå…¶åçš„ä»£ç ï¼ŒåŒ¹é…åˆ°çš„åŸå­—ç¬¦è¢«ä¿å­˜åœ¨<code>yytext</code>è¿™ä¸ªå…¨å±€å˜é‡ä¸­ã€‚</p>
<p>æ¥ç€æ¥ç¼–å†™yaccçš„è§„åˆ™ï¼Œå…¶æ‰©å±•åä¸º<code>.y</code>ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">%&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> YYDEBUG 1</span></div><div class="line"></div><div class="line">%&#125;</div><div class="line"></div><div class="line">%<span class="keyword">union</span> &#123;</div><div class="line">	<span class="keyword">int</span>	int_value;</div><div class="line">	<span class="keyword">double</span>	double_value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">%token &lt;double_value&gt;		DOUBLE_LITERAL</div><div class="line">%token ADD SUB MUL DIV CR</div><div class="line">%type &lt;double_value&gt; expression term primary_expression</div><div class="line"></div><div class="line">%%</div><div class="line"></div><div class="line">line_list</div><div class="line">	: line</div><div class="line">	| line_list line</div><div class="line">;</div><div class="line">line</div><div class="line">	: expression CR</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"&gt;&gt;%lf\n"</span>, $<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">;</div><div class="line">expression</div><div class="line">	: term</div><div class="line">	| expression ADD term</div><div class="line">	&#123;</div><div class="line">		$$ = $<span class="number">1</span> + $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">	| expression SUB term</div><div class="line">	&#123;</div><div class="line">		$$ = $<span class="number">1</span> - $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">;</div><div class="line">term</div><div class="line">	: primary_expression</div><div class="line">	| term MUL primary_expression</div><div class="line">	&#123;</div><div class="line">		$$ = $<span class="number">1</span> * $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">	| term DIV primary_expression</div><div class="line">	&#123;</div><div class="line">		$$ = $<span class="number">1</span> / $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">;</div><div class="line">primary_expression</div><div class="line">	: DOUBLE_LITERAL</div><div class="line">;</div><div class="line"></div><div class="line">%%</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">char</span> <span class="keyword">const</span> *str)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">extern</span> <span class="keyword">char</span> *yytext;</div><div class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"syntax error near %s\n"</span>, yytext);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">yyparse</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line">	<span class="keyword">extern</span> FILE *yyin;</div><div class="line"></div><div class="line">	yyin = <span class="built_in">stdin</span>;</div><div class="line">	<span class="keyword">if</span> (yyparse()) &#123;</div><div class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Core Dump!\n"</span>);</div><div class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>yaccè§„åˆ™å®šä¹‰è·Ÿlexç›¸ä¼¼ï¼Œéƒ½ç”¨åˆ°äº†<code>\%{\%}</code> <code>%%</code>æ¥åŒ…å«ä»£ç å—ã€‚<br>åŒæ ·çš„æ˜¯<code>\%{\%}</code>åŒ…è£¹çš„ä»£ç å°†è¢«åŸæ ·è¾“å‡ºã€‚<br>åœ¨<code>%union</code>å®šä¹‰ä¸­ï¼Œå£°æ˜äº†è®°å·å’Œéç»ˆç»“ç¬¦çš„ç±»å‹ï¼Œå…¶æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªcè¯­è¨€çš„unionã€‚è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªint ç±»å‹çš„<code>int_value</code> å’Œ doubleç±»å‹çš„<code>double_value</code>ã€‚<br><code>%token</code>å¼€å¤´çš„è¡Œæ˜¯Tokençš„å£°æ˜ï¼Œæ‰€æœ‰ç”¨åˆ°çš„Tokenç±»å‹éƒ½åœ¨è¿™é‡Œå®šä¹‰ã€‚å¯¹äº<code>ADD</code> <code>SUB</code> <code>MUL</code> <code>DIV</code> <code>CR</code>ç­‰è®°å·åªéœ€è¦åŒ…å«å…¶ç±»å‹å³å¯ï¼Œè€Œå¯¹äºå€¼ä¸º<code>DOUBLE_LITERAL</code>çš„Tokenï¼Œå…¶ç±»å‹è¢«æŒ‡å®šä¸º<code>&lt;double_value&gt;</code>ï¼Œè¿™é‡Œçš„double_valueæ­£æ˜¯æ¥è‡ªäºå‰é¢å£°æ˜çš„unionä¸­çš„æˆå‘˜ä¹‹ä¸€ã€‚<br><code>%%</code>åŒ…è£¹çš„éƒ¨åˆ†å«åšè§„åˆ™åŒºå—ï¼Œç”±è¯­æ³•è§„åˆ™å’ŒCè¯­è¨€ç¼–å†™çš„ç›¸åº”çš„è¡Œä¸ºä¸¤éƒ¨åˆ†æ„æˆã€‚åœ¨yaccä¸­ä½¿ç”¨äº†ç±»ä¼¼äºBNFèŒƒå¼æ¥ç¼–å†™è¯­æ³•è§„åˆ™ã€‚ç”±äºä½¿ç”¨äº†è‡ªç„¶è¯­è¨€ä½œä¸ºæ ‡è®°ï¼Œç†è§£ä¸Šè¿˜æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä¸‹é¢ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">line_list                 <span class="comment">/* å¤šè¡Œè§„åˆ™ */</span></div><div class="line">	: line                  <span class="comment">/* å•è¡Œ */</span></div><div class="line">	| line_list line        <span class="comment">/* æˆ–è€…å¤šè¡Œåè·Ÿå•è¡Œ */</span></div><div class="line">;</div><div class="line">line                       <span class="comment">/* å•è¡Œ */</span></div><div class="line">	: expression CR          <span class="comment">/* è¡¨è¾¾å¼åè·Ÿæ¢è¡Œç¬¦ */</span></div><div class="line">;</div><div class="line">expression                 <span class="comment">/* è¡¨è¾¾å¼ */</span></div><div class="line">	: term                   <span class="comment">/* å’Œé¡¹ */</span></div><div class="line">	| expression ADD term    <span class="comment">/* æˆ–è€…è¡¨è¾¾å¼åŠ ä¸Šå’Œé¡¹ */</span></div><div class="line">	&#123;                        <span class="comment">/* åŒ¹é…åæ‰§è¡Œçš„action */</span></div><div class="line">		$$ = $<span class="number">1</span> + $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">	| expression SUB term    <span class="comment">/* æˆ–è€…è¡¨è¾¾å¼å‡å»å’Œé¡¹ */</span></div><div class="line">	&#123;                        <span class="comment">/* åŒ¹é…åæ‰§è¡Œçš„action */</span></div><div class="line">		$$ = $<span class="number">1</span> - $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">;</div><div class="line">term                        <span class="comment">/* å’Œé¡¹ */</span></div><div class="line">	: primary_expression      <span class="comment">/* ä¸€å…ƒè¡¨è¾¾å¼ */</span></div><div class="line">	| term MUL primary_expression <span class="comment">/* æˆ–è€…å’Œé¡¹ä¹˜ä»¥ä¸€å…ƒè¡¨è¾¾å¼ */</span></div><div class="line">	&#123;                          <span class="comment">/* åŒ¹é…åæ‰§è¡Œçš„action */</span></div><div class="line">		$$ = $<span class="number">1</span> * $<span class="number">3</span>;</div><div class="line">	&#125;                          </div><div class="line">	| term DIV primary_expression <span class="comment">/* æˆ–è€…å’Œé¡¹é™¤ä»¥ä¸€å…ƒè¡¨è¾¾å¼ */</span></div><div class="line">	&#123;                             <span class="comment">/* åŒ¹é…åæ‰§è¡Œçš„action */</span></div><div class="line">		$$ = $<span class="number">1</span> / $<span class="number">3</span>;</div><div class="line">	&#125;</div><div class="line">;</div><div class="line">primary_expression          <span class="comment">/* ä¸€å…ƒè¡¨è¾¾å¼ */</span></div><div class="line">	: DOUBLE_LITERAL          <span class="comment">/* å®æ•°å­—é¢é‡ */</span></div><div class="line">;</div></pre></td></tr></table></figure>
<p>å†™å¥½äº†è§„åˆ™ï¼Œé‚£ä¹ˆå°±æ¥ç¼–è¯‘è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yacc -dv foo.y</div><div class="line">flex foo.l</div><div class="line">gcc -std=c99 -Wall -g -o foo y.tab.c lex.yy.c</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ç”Ÿæˆäº†<code>foo</code>è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶<br>è¿è¡Œfoo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">liubang@venux:~/workspace/c/my_lang/lex$ make run</div><div class="line">1 + 3</div><div class="line">&gt;&gt;4.000000</div><div class="line">1/2 </div><div class="line">&gt;&gt;0.500000</div><div class="line">4 * 5</div><div class="line">&gt;&gt;20.000000</div></pre></td></tr></table></figure>
<p>å½“ç„¶æˆ‘ä¸ªäººåœ¨å¼€å‘cç¨‹åºçš„æ—¶å€™åå‘äºä½¿ç”¨makeå·¥å…·æ¥ç¼–è¯‘ä»£ç ï¼Œè¿™æ ·ä¼šå¾ˆæ–¹ä¾¿ã€‚ä¸‹é¢æ˜¯æˆ‘çš„Makefileæ–‡ä»¶:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">CFLAGS = -O2 -g -Wall -std=c99</div><div class="line">EXEC = foo</div><div class="line">OBJS =	y.tab.o \</div><div class="line">	lex.yy.o</div><div class="line"></div><div class="line"></div><div class="line">%.c:</div><div class="line">	yacc -dv foo.y</div><div class="line">	lex foo.l</div><div class="line"></div><div class="line">%.o: %.c</div><div class="line">	 <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -o $@ -c $&lt;</div><div class="line"></div><div class="line">$(EXEC): $(OBJS)</div><div class="line">	<span class="variable">$(CC)</span> <span class="variable">$(OBJS)</span> -o $@</div><div class="line"></div><div class="line">all: $(EXEC)</div><div class="line"></div><div class="line">run: $(EXEC)</div><div class="line">	@./<span class="variable">$(EXEC)</span></div><div class="line"></div><div class="line"><span class="section">clean:</span></div><div class="line">	<span class="variable">$(RM)</span> <span class="variable">$(OBJS)</span> <span class="variable">$(EXEC)</span></div></pre></td></tr></table></figure>
<p>åªéœ€è¦æ‰§è¡Œ<code>make run</code>å‘½ä»¤å³å¯è¿è¡Œï¼</p>
<h1 id="é™„åŠ "><a href="#é™„åŠ " class="headerlink" title="é™„åŠ "></a>é™„åŠ </h1><p>å¯èƒ½æœ‰äººä¼šç–‘æƒ‘ï¼Œè¿™ç©æ„å­¦ç€æœ‰ä»€ä¹ˆç”¨ï¼Œé‚£ä¹ˆæœ‰å…´è¶£çš„ä½ å¯ä»¥ä¸‹è½½ä¸€ä»½PHPçš„æºä»£ç ï¼Œåœ¨Zend(Zendå¼•æ“æ ¸å¿ƒæ–‡ä»¶)ç›®å½•ä¸­ä½ ä¸éš¾æ‰¾åˆ°<code>zend_language_scanner.l</code>,<code>zend_ini_scanner.l</code>,<code>zend_ini_parser.y</code>,<code>zend_language_parser.y</code>è¿™å‡ ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€å…¶å†…å®¹ï¼Œæ˜¯ä¸æ˜¯ä¸å†é‚£ä¹ˆææƒ§å’Œé™Œç”Ÿäº†å‘¢ã€‚</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>æœ¬æ–‡åªæ˜¯åˆæ­¥ä»‹ç»yacc/lexå·¥å…·ç”Ÿæˆè¯æ³•è§£æå™¨å’Œè¯­æ³•è§£æå™¨çš„æœ€åŸºæœ¬ç”¨æ³•ï¼Œæ²¡æœ‰å¤ªå¤šçš„é˜è¿°è¯æ³•è§£æçš„åŸç†å’Œè¿‡ç¨‹ï¼Œæ‰€ä»¥æ›´åå®è·µï¼Œå†ç”±äºæœ¬äººæ¯•ä¸šä¸€å¹´å¤šå®åœ¨å¾ˆä¹…æ²¡å†™æ–‡ç« äº†ï¼Œå¸¸å¸¸ä¼šæç¬”ä¸çŸ¥ä»ä½•è¯´èµ·ï¼Œæ‰€ä»¥å†™èµ·æ¥å¾ˆæ…¢ï¼ŒåŠ ä¹‹ç™½å¤©è¦å·¥ä½œï¼Œæ—¶é—´è¾ƒç´§ï¼Œæ‰€ä»¥ä»Šå¤©å°±åˆ°è¿™é‡Œäº†ï¼Œè‡³äºç†è®ºçš„é˜è¿°ï¼Œéœ€è¦æ—¶é—´æ¥æ…¢æ…¢é…é…¿ğŸ˜‚ï¼</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Demo]]></title>
      <url>http://iliubang.github.io/2017/02/06/Demo/</url>
      <content type="html"><![CDATA[<p>this is my demo document.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">foo</span></div><div class="line"></div><div class="line"><span class="title">class</span> <span class="title">App</span> &#123;</div><div class="line">    </div><div class="line">    <span class="title">private</span> <span class="title">static</span> $<span class="title">instance</span> = <span class="title">null</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;    </div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>::$instance <span class="keyword">instanceof</span> <span class="keyword">self</span>) &#123;</div><div class="line">            <span class="keyword">self</span>::$instance = <span class="keyword">new</span> <span class="keyword">self</span>();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::$instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="test-math"><a href="#test-math" class="headerlink" title="test math"></a>test math</h2><p>è¿™æ˜¯æµ‹è¯•ç”¨çš„$\lambda$</p>
<p>$$\frac{\partial u}{\partial t}<br>= h^2 \left( \frac{\partial^2 u}{\partial x^2} +<br>\frac{\partial^2 u}{\partial y^2} +<br>\frac{\partial^2 u}{\partial z^2}\right)$$</p>
]]></content>
    </entry>
    
  
  
</search>
