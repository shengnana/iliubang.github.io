---
layout: post
title: c++编程之OOP示例
author: 刘邦
excerpt: "c++编程之OOP示例"
date: "2018-03-02"
catalog: true
tags: [c++]
category: c++
comments: true
---

原文地址:[https://www.ntu.edu.sg/home/ehchua/programming/cpp/cp5_OOPExamples.html](https://www.ntu.edu.sg/home/ehchua/programming/cpp/cp5_OOPExamples.html)

# 1. 示例：使用引用的"Time"类

回到之前版本的"Time"类，假设我们想增加链式操作，例如`t.nextSecond().nextSecond().print()`，我们就需要让`nextSecond()`返回`this`的一个引用。

Time.h

```cpp
class Time {
private:
	......
public:
	Time &nextSecond(); // Return a reference to "this" instance
	......
}
```

在函数原型中，我们申明了一个`nextSecond()`的成员函数，返回`Time`对象的引用。返回的引用可以用来继续调用成员函数。

Time.cpp

```cpp
// Increase this instance by one second and return this instance by reference.
Time &Time::nextSecond() {
	if (++second == 60) {
		second = 0;
		if (++minute == 60) {
			minute = 0;
			if (++hour = 24) {
				hour = 0;
			}
		}
	}

	return *this; // Return this instance by reference 
				  // "this" is a pointer to this instance. *this refers to the instance.
}
```

C++有一个关键字"this"，它保存了一个指向当前实例的指针。也就是说，`*this`指的是当前实例。


